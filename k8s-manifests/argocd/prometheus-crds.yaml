# apiVersion: argoproj.io/v1alpha1
# kind: Application
# metadata:
#   name: kube-prometheus-stack
#   namespace: argocd
#   finalizers:
#     - resources-finalizer.argocd.argoproj.io
# spec:
#   project: default
  
#   source:
#     repoURL: https://prometheus-community.github.io/helm-charts
#     chart: kube-prometheus-stack
#     targetRevision: 58.5.0
    
#     helm:
#       skipCrds: false
      
#       values: |
#         # ========================================
#         # Prometheus Configuration
#         # ========================================
#         prometheus:
#           enabled: true
          
#           prometheusSpec:
#             replicas: 1
            
#             # ğŸ”¥ Retention Settings (Ø§Ù„Ø­Ù„ Ù„Ù„Ù€ OOMKilled!)
#             retention: 2h
#             retentionSize: 500MB
            
#             # Resources Ù…Ø­Ø³Ù‘Ù†Ø© Ù„Ù„Ù€ EC2 8GB
#             resources:
#               requests:
#                 memory: 1536Mi
#                 cpu: 200m
#               limits:
#                 memory: 3Gi
#                 cpu: 1000m
            
#             # Storage
#             storageSpec: {}
            
#             # Performance
#             walCompression: true
#             scrapeInterval: 60s
#             evaluationInterval: 60s
            
#             # Selectors
#             serviceMonitorSelectorNilUsesHelmValues: false
#             podMonitorSelectorNilUsesHelmValues: false
#             ruleSelectorNilUsesHelmValues: false
        
#         # Ø§Ù‚ÙÙ„ Ø§Ù„Ù€ monitors Ø§Ù„Ù…Ø´ Ø¶Ø±ÙˆØ±ÙŠØ©
#         kubeApiServer:
#           enabled: false
#         kubeControllerManager:
#           enabled: false
#         kubeScheduler:
#           enabled: false
#         kubeProxy:
#           enabled: false
#         kubeEtcd:
#           enabled: false
        
#         alertmanager:
#           enabled: true
#           alertmanagerSpec:
#             resources:
#               requests:
#                 memory: 64Mi
#                 cpu: 25m
#               limits:
#                 memory: 128Mi
#                 cpu: 50m
        
#         # ========================================
#         # Grafana Configuration (Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨ØªØ§Ø¹ØªÙƒ!)
#         # ========================================
#         grafana:
#           enabled: true
          
#           # âœ… Admin credentials Ù…Ù† Secret
#           admin:
#             existingSecret: grafana-admin-secret
#             userKey: admin-user
#             passwordKey: admin-password
          
#           # âœ… Resources (Ù‚Ù„Ù„Ù†Ø§Ù‡Ù… Ø´ÙˆÙŠØ© Ø¹Ø´Ø§Ù† EC2 8GB)
#           resources:
#             requests:
#               memory: 128Mi
#               cpu: 50m          # Ù‚Ù„Ù„Ù†Ø§Ù‡ Ù…Ù† 100m
#             limits:
#               memory: 256Mi
#               cpu: 200m         # Ù‚Ù„Ù„Ù†Ø§Ù‡ Ù…Ù† 250m
          
#           # âœ… Persistence (Ù…Ù‡Ù… Ù„Ù„Ù€ dashboards!)
#           persistence:
#             enabled: true
#             size: 5Gi
          
#           # âœ… Ingress (ALB Ø¹Ù„Ù‰ AWS)
#           ingress:
#             enabled: true
#             ingressClassName: alb
#             annotations:
#               alb.ingress.kubernetes.io/scheme: internet-facing
#               alb.ingress.kubernetes.io/target-type: ip
#               alb.ingress.kubernetes.io/group.name: shared-alb
#               alb.ingress.kubernetes.io/listen-ports: '[{"HTTP":80},{"HTTPS":443}]'
#               alb.ingress.kubernetes.io/ssl-redirect: '443'
#               alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:eu-north-1:231056963705:certificate/5e76be6b-fbf8-474d-a62d-9e746ca23b19
#             hosts:
#               - grafana.yassinabuelsheikh.store
#             path: /
#             pathType: Prefix
          
#           # âœ… Default dashboards
#           defaultDashboardsEnabled: true
  
#         # ========================================
#         # Ø§Ù‚ÙÙ„ Ø§Ù„Ù€ Components Ø§Ù„Ù…Ø´ Ø¶Ø±ÙˆØ±ÙŠØ©
#         # ========================================
#         kubeApiServer:
#           enabled: false
        
#         kubeControllerManager:
#           enabled: false
        
#         kubeScheduler:
#           enabled: false
        
#         kubeProxy:
#           enabled: false
        
#         kubeEtcd:
#           enabled: false
        
#         # ========================================
#         # Ø§Ù„Ù€ Components Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
#         # ========================================
#         kubelet:
#           enabled: true
#           serviceMonitor:
#             interval: 60s
        
#         kubeStateMetrics:
#           enabled: true
        
#         nodeExporter:
#           enabled: true
        
#         # ========================================
#         # Alertmanager
#         # ========================================
#         alertmanager:
#           enabled: true
          
#           alertmanagerSpec:
#             replicas: 1
#             resources:
#               requests:
#                 memory: 64Mi
#                 cpu: 25m
#               limits:
#                 memory: 128Mi
#                 cpu: 50m
        
#         # ========================================
#         # Prometheus Operator
#         # ========================================
#         prometheusOperator:
#           resources:
#             requests:
#               memory: 128Mi
#               cpu: 50m
#             limits:
#               memory: 256Mi
#               cpu: 100m
  
#   destination:
#     server: https://kubernetes.default.svc
#     namespace: monitoring
  
#   syncPolicy:
#     automated:
#       prune: true
#       selfHeal: true
    
#     syncOptions:
#       - CreateNamespace=true
#       - ServerSideApply=true
    
#     retry:
#       limit: 5
#       backoff:
#         duration: 10s
#         factor: 2
#         maxDuration: 3m
# # apiVersion: argoproj.io/v1alpha1
# # kind: Application
# # metadata:
# #   name: prometheus-crds
# #   namespace: argocd
# #   finalizers:
# #     - resources-finalizer.argocd.argoproj.io
# #   annotations:
# #     argocd.argoproj.io/sync-wave: "1"  # Ù‚Ø¨Ù„ monitoring
# # spec:
# #   project: default
# #   source:
# #     repoURL: https://prometheus-community.github.io/helm-charts
# #     chart: kube-prometheus-stack
# #     targetRevision: 58.5.0
# #     helm:
# #       skipCrds: false
# #       parameters:
# #         - name: prometheus.enabled
# #           value: "false"  # â¬…ï¸ Ø§Ù‚ÙÙ„ ÙƒÙ„ Ø­Ø§Ø¬Ø© Ù…Ø§ Ø¹Ø¯Ø§ CRDs
# #         - name: alertmanager.enabled
# #           value: "false"
# #         - name: grafana.enabled
# #           value: "false"
# #         - name: prometheusOperator.enabled
# #           value: "false"
# #         - name: kubeStateMetrics.enabled
# #           value: "false"
# #         - name: nodeExporter.enabled
# #           value: "false"
# #   destination:
# #     server: https://kubernetes.default.svc
# #     namespace: monitoring
# #   syncPolicy:
# #     automated:
# #       prune: false  # â¬…ï¸ Ù„Ù„Ù€ CRDs Ø®Ù„ÙŠÙ‡ false
# #       selfHeal: false
# #     syncOptions:
# #       - CreateNamespace=true
# #       - ServerSideApply=true
#   #   helm:
#   #     skipCrds: false  # â¬…ï¸ Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹!
#   #     parameters:
#   #       - name: crds.enabled
#   #         value: "true"
#   # destination:
#   #   server: https://kubernetes.default.svc
#   #   namespace: monitoring
#   # syncPolicy:
#   #   automated:
#   #     prune: false  # â¬…ï¸ Ù…ÙŠÙ…Ø³Ø­Ø´ Ø§Ù„Ù€ CRDs!
#   #     selfHeal: true
#   #   syncOptions:
#   #     - CreateNamespace=true
#   #     - ServerSideApply=true
#   #     - Replace=true
#   #   retry:
#   #     limit: 5
#   #     backoff:
#   #       duration: 10s
#   #       factor: 2
#   #       maxDuration: 3m



# # ------------------
# # apiVersion: argoproj.io/v1alpha1
# # kind: Application
# # metadata:
# #   name: prometheus-crds
# #   namespace: argocd
# #   # ÙŠÙØ¶Ù„ Ø¥Ø¶Ø§ÙØ© finalizer ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ù„Ù„Ø­Ù…Ø§ÙŠØ©
# #   finalizers:
# #     - resources-finalizer.argocd.argoproj.io
# #   annotations:
# #     argocd.argoproj.io/sync-wave: "1"  
# # spec:
# #   project: default
# #   source:
# #     repoURL: https://github.com/prometheus-operator/prometheus-operator.git
# #     # Ø§Ø³ØªØ®Ø¯Ù… tag Ù…Ø­Ø¯Ø¯ (Ù…Ø³ØªÙ‚Ø±) Ø¨Ø¯Ù„ main ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬
# #     targetRevision: v0.75.2   # Ù…Ø«Ø§Ù„ - ØºÙŠÙ‘Ø±Ù‡ Ù„Ø¥ØµØ¯Ø§Ø± Ù…Ø³ØªÙ‚Ø± ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø§Ù„Ù€ chart
# #     path: example/prometheus-operator-crd
# #   destination:
# #     server: https://kubernetes.default.svc
# #     namespace: monitoring
# #   syncPolicy:
# #     automated:
# #       prune: true
# #       selfHeal: true
# #     syncOptions:
# #       - CreateNamespace=true           # Ù„Ùˆ Ø§Ù„Ù€ namespace Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯
# #       - ServerSideApply=true           # Ù…Ù‡Ù… Ø¬Ø¯Ù‹Ø§ Ù„Ù„Ù€ CRDs
# #       - ApplyOutOfSyncOnly=true
# #       - RespectIgnoreDifferences=true
# #     # retry Ù…Ù‡Ù… ÙÙŠ Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø¹Ø´Ø§Ù† ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø´Ø¨ÙƒØ©
# #     retry:
# #       limit: 5
# #       backoff:
# #         duration: 10s
# #         factor: 2

# #         maxDuration: 3m





